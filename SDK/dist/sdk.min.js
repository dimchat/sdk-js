/**
 *  DIM-SDK (v0.1.0)
 *  (DIMP: Decentralized Instant Messaging Protocol)
 *
 * @author    moKy <albert.moky at gmail.com>
 * @date      Feb. 1, 2020
 * @copyright (c) 2020 Albert Moky
 * @license   {@link https://mit-license.org | MIT License}
 */
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('!4(e){2 f=e.N.3t;2 g=4(a){1.K=a;1.28={}};g.6.1t=4(a){3 1.K.1t(a)};g.6.1O=4(a,b){1.K.1O(a,b)};g.6.L=4(){3 1.K.L()};2 h={};g.1m=4(a,b){5(b){h[a]=b}F{19 h[a]}};2 i=4(a){2 b=1.28[a];5(b){3 b}2 c=h[a];5(!c){c=h[f.3u]}5(c){3 J c(1.K)}F{M 1u("16 17 1n 29 Q R 1h: "+a)}};g.6.1a=4(a,b,c){2 d=i.D(1,a.1h);5(!d){M 1u("16 17 1n 29 Q R: "+a)}F{5(d===1){M S("3v 3w!")}}3 d.1a(a,b,c)};5(1P e.18!=="3x"){e.18={}}e.18.2a=g}(H);!4(b){2 c=b.1v;2 d=4(a){c.D(1,a)};d.T(c);d.6.1b=4(){2 a=c.6.1b.D(1);5(a){3 a}3 1.1w()};b.1c=d}(H);!4(a){2 b=a.3y;2 c=4(){};c.T(b);c.6.1Q=4(){8.9(C,"U V!");3 7};a.3z=c}(H);!4(b){2 c=b.1v;2 d=4(a){c.D(1,a)};d.T(c);d.6.1Q=4(){3 1.1i.1Q(1.1d)};b.1R=d}(H);!4(b){2 c=b.1S;2 d=4(a){c.D(1,a)};d.T(c);b.2b=d}(H);!4(d){2 e=d.1S;2 f=4(a,b,c){e.D(1,a);1.3A=b;1.3B=c};f.T(e);d.2c=f}(H);!4(b){2 c=b.1v;2 d=4(a){c.D(1,a)};d.T(c);d.6.3C=4(){3 1.1i.13(1.1d)};b.2d=d}(H);!4(c){2 d=c.N.1T;2 e=4(a){2 b=7;5(!a){a=e.1x}F{5(a Z 2e){b=a;a=e.1x}}d.D(1,a);5(b){1.2f(b)}};e.T(d);e.1x="2g";e.6.3D=4(){3 1.1e("1y")};e.6.2f=4(a){1.X("1y",a)};d.1m(e.1x,e);c.N.3E=e}(H);!4(c){2 d=c.N.1T;2 e=4(a){2 b=7;5(!a){a=e.1z}F{5(a Z 2e){b=a;a=e.1z}}d.D(1,a);5(b){1.2h(b)}};e.T(d);e.1z="2i";e.6.3F=4(){3 1.1e("1y")};e.6.2h=4(a){1.X("1y",a)};d.1m(e.1z,e);c.N.3G=e}(H);!4(e){2 f=e.2j;2 g=e.N.1T;2 h=4(a){2 b=7;2 c=7;2 d=7;5(!a){a=g.1o}F{5(1P a==="3H"){b=a;a=g.1o}F{5(1P a==="3I"){c=a;a=g.1o}F{5(a Z f){d=a;a=g.1o}}}}g.D(1,a);5(b){1.2k(b)}5(c){1.2l(c)}5(d){1.2m(d)}F{1.I=7}};h.T(g);h.6.2k=4(a){1.X("1U",a);1.1U=a};h.6.1V=4(){3 1.1e("Y")};h.6.2l=4(a){1.X("Y",a)};h.6.3J=4(){5(!1.I){2 a=1.1e("I");5(!a){2 b=1.1e("1f");2 c=1.1e("14");5(b&&c){a=1.3K(C)}}1.I=f.1A(a)}3 1.I};h.6.2m=4(a){1.X("I",7);5(a){1.X("1f",a.1f);1.X("14",a.14);1.X("1W",a.1W);1.X("1j",a.1X())}1.I=a};g.1m(g.1o,h);e.N.2n=h}(H);!4(e){2 f=e.P;2 g=e.3L;2 h=4(){2 a={"2o":f.2p,"2q":f.2p,"2r":f.2s,"2t":f.2s,"2u":h.2v};2 b={};2 c=h.2w;Q(2 i=0;i<c.W;++i){b[c[i]]=10}1.2x=b;1.1k=a};h.6.2y=4(a){3 1.2x[a]===10};h.6.2z=4(a,b){5(1.2y(a)){3 C}5(b){1.1k[a]=b}F{19 1.1k[a]}};h.6.2A=4(a,b){8.9(a!==7,"3M E");8.9(b!==7,"P E");8.9(C,"U V!");3 C};h.6.G=4(a){3 1.1k[a]};h.6.3N=4(a){2 b=[];2 c=3O.2B(1.1k);2 d;Q(2 i=0;i<c.W;++i){d=c[i];5(1.1k[d]===a){b.2C(d)}}3 b};h.2v=J f("3P",g.3Q);h.2w=["2o","2q","2r","2t","2u","3R","3S","3T","3U","3V","3W","3X","3Y","3Z","40","41","1Y","1g","42","43","44","2D","45","46","47","48","1l","1B","49","11","1j","4a","2E","4b","4c","2F","4d","4e","4f","4g","4h","4i","4j","4k","4l","4m","4n","4o","4p","Y","4q","4r","4s","I","1f","14","1W","R","2G","4t","4u","2B","1C","4v","1h","4w","1U","4x","4y","4z","4A","4B","4C","4D","4E","2g","2i","1m","4F","2H","4G","4H","4I","4J","4K","4L","4M","4N","4O","4P","4Q","4R","4S","2I","4T","4U","2z","4V","1D","2J","4W","K","4X","4Y"];e.4Z=h}(H);!4(c){2 d=c.50;2 e=4(){d.D(1);1.11=7};e.T(d);e.6.51=4(){3 1.11};e.6.52=4(a){5(1.11){1.53();5(1.11.15(a)){3}}5(!a){1.11=7;3}1.11=a;2 b=1.2K();5(b){1.54(b)}};e.6.55=4(a){8.9(a!==7,"56 E");3 C};e.6.2K=4(){3 7};c.57=e}(H);!4(c){2 d=4(){};d.6.1Z=4(a,b){8.9(a||b,"2L E");8.9(C,"U V!")};c.58=d}(H);!4(b){2 c=4(){};c.6.2M=4(){8.9(C,"U V!")};c.6.2N=4(a){8.9(a!==7,"2L E");8.9(C,"U V!")};b.59=c}(H);!4(b){2 c=4(){};c.6.2O=4(a){8.9(a!==7,"1C E");8.9(C,"U V!");3 7};b.2P=c}(H);!4(c){2 d=4(){};d.6.2Q=4(a,b){8.9(a!==7,"1C E");8.9(b!==7,"2R E");8.9(C,"U V!");3 7};d.6.2S=4(a,b){8.9(a!==7,"5a E");8.9(b!==7,"2R E");8.9(C,"U V!");3 7};d.6.2T=4(a,b){8.9(a!==7,"1C E");8.9(b!==7,"5b E");8.9(C,"U V!");3 C};c.5c=d}(H);!4(g){2 h=g.1Y.5d;2 j=g.N.5e;2 k=g.5f;2 l=g.1S;2 m=g.2b;2 n=g.2c;2 o=g.1v;2 p=g.1c;2 q=g.1R;2 r=g.2d;2 s=g.5g;2 t=4(){s.D(1);1.1D=7;1.1p={};1.1q={};1.1E={};1.1F={}};t.T(s);t.6.20=4(a){5(!1.1D){3 7}3 1.1D.G(a)};t.6.2U=4(a,b){3 a.1G(b)};t.6.21=4(a,b){5(!1.2U(a,b)){3 C}3 s.6.21.D(1,a,b)};t.6.2V=4(a,b){8.9(a!==7,"1l E");8.9(b!==7,"P E");3 C};t.6.2W=4(a){8.9(a!==7,"P E");3 7};2 u="5h";t.6.2X=5i;t.6.2Y=4(a,b){5(b){5(!a||!b.15(a.G())){3 C}}F{b=a.G();b=1.G(b);5(!b){M S("1B P 22: "+a)}}2 c;5(b.12().1r()){2 d=1.13(b);5(d){2 e;Q(2 i=0;i<d.W;++i){e=1.G(d[i]);c=1.O(e);5(!c){5j}5(a.2Z(c.1g)){3 10}}}2 f=1.1b(b);5(!f){5(b.12().15(j.1c)){c=1.O(b)}F{3 C}}F{5(d&&d.1H(f)){3 C}F{c=1.O(f)}}}F{c=1.O(b)}3 c&&a.2Z(c.1g)};t.6.5k=4(a,b){5(!a){19 1.1p[b];3 C}5(!1.2Y(a,b)){3 C}5(!b){b=a.G();b=1.G(b);5(!b){M S("1B P 22: "+a)}}1.1p[b]=a};t.6.5l=4(a,b){8.9(a!==7,"1B E");8.9(b!==7,"P E");3 C};t.6.30=4(a){8.9(a!==7,"P E");3 7};t.6.31=4(a,b){2 c=1.O(b);5(c){3 c.1g.1G(a)}F{M S("16 17 1n 1l Q 11: "+b)}};t.6.5m=4(a,b){5(!a){19 1.1q[b];3 C}5(!1.31(a,b)){3 C}1.1q[b]=a;3 10};t.6.5n=4(a,b){8.9(a!==7,"2D 1g E");8.9(b!==7,"P E");3 C};t.6.32=4(a){8.9(a!==7,"P E");3 7};t.6.33=4(a,b){5(!a){19 1.1E[b];3 C}1.1E[b]=a;3 10};t.6.5o=4(a,b){8.9(a!==7,"5p E");8.9(b!==7,"P E");3 C};t.6.34=4(a){8.9(a!==7,"P E");3 7};t.6.35=4(a,b){5(!a){19 1.1F[b];3 C}1.1F[b]=a;3 10};t.6.5q=4(a,b){8.9(a!==7,"5r E");8.9(b!==7,"P E");3 C};t.6.36=4(a){8.9(a!==7,"P E");3 7};t.6.23=4(){8.9(C,"U V!");3 7};t.6.24=4(){2 a=1.23();5(!a||a.W===0){3 7}3 a[0]};t.6.37=4(a){2 b=1.20(a);5(b){3 b}3 s.6.37.D(1,a)};t.6.5s=4(a){5(a.1s()){3 J l(a)}2 b=a.12();5(b.5t()){3 J l(a)}5(b.5u()){3 J m(a)}5(b.5v()){3 J n(a)}M 1u("38 11 1h: "+b)};t.6.5w=4(a){5(a.1s()){3 J o(a)}2 b=a.12();5(b.15(j.1c)){3 J p(a)}5(b.15(j.1R)){3 J q(a)}5(b.5x()){3 J r(a)}M 1u("38 1j 1h: "+b)};t.6.O=4(a){2 b=s.6.O.D(1,a);5(b){3 b}b=1.2W(a);5(b){s.6.21.D(1,b,a)}3 b};t.6.5y=4(a){2 b=1.1p[a];5(b){2 c=J 5z();2 d=c.5A()/5B+1.2X;2 e=b.1e(u);5(e===7){b.X(u,d);3 b}F{5(e<d){3 b}}}b=1.30(a);5(b Z k){b.X(u,7)}F{b=J k(a)}1.1p[a]=b;3 b};t.6.5C=4(a){2 b=1.1E[a];5(b){3 b}b=1.34(a);5(b){1.33(b,a)}3 b};t.6.39=4(a){2 b=1.1q[a];5(b){3 b}b=1.32(a);5(b){1.1q[a]=b}3 b};t.6.5D=4(a){2 b=[];2 c=1.39(a);5(c&&c.5E(h)){b.2C(c)}3 b};t.6.1w=4(a){2 b=s.6.1w.D(1,a);5(b){3 b}2 c=1.13(a);5(c){2 d=1.O(a);5(d){2 e;2 f;Q(2 i=0;i<c.W;++i){e=1.G(c[i]);f=1.O(e);5(f&&f.1G(f.1g)){3 e}}}}3 7};t.6.1b=4(a){2 b=s.6.1b.D(1,a);5(b){3 b}5(a.12().15(j.1c)){3 1.1w(a)}3 7};t.6.13=4(a){2 b=s.6.13.D(1,a);5(!b){b=1.1F[a]}5(b){3 b}b=1.36(a);5(b){1.35(b,a)}3 b};t.6.3a=4(a,b){2 c=1.O(b);5(!c){M S("16 17 1n 1l Q 1j: "+b)}2 d=1.O(a);5(!d){M S("16 17 1n 1l Q 2E: "+a)}3 c.1G(d.1g)};t.6.5F=4(a,b){5(b.12().15(j.1c)){3 1.3a(a,b)}M S("5G 1c 5H 5I")};t.6.5J=4(a,b){2 c=1.13(b);5(c&&c.1H(a)){3 10}2 d=1.1b(b);5(d){d=1.G(d);3 d.15(a)}F{3 C}};t.6.3b=4(a){2 b=1.20("2F");5(b){3[b]}3 7};t.6.5K=4(a,b){2 c=1.3b(b);5(c){3 c.1H(a)}3 C};g.3c=t}(H);!4(i){2 j=i.N.3d;2 k=i.N.1j.5L;2 l=i.N.1j.5M;2 m=i.18.2a;2 n=4(a){1.K=a;1.18=7};n.6.L=4(){3 1.K.L()};2 o=4(a){2 b=1.L();2 c=b.13(a);5(!c||c.W===0){3 10}2 d=b.1b(a);3 d===7};2 p=4(a,b){2 c=1.L();2 d=c.G(a.1X());5(!d||d.1s()){3 C}2 e=c.O(d);5(!e){3 10}2 f=o.D(1,d);5(a Z k){f=C}5(f){2 g=J l(d);3 1.K.25(g,b)}3 C};n.6.1a=4(a){2 b=1.K.1I(a);5(!b){3 7}2 c=1.L();2 d=a.I.14;d=c.G(d);5(d.12().1r()&&d.1s()){3 1.K.3e(a)}2 e=1.K.1J(b);5(!e){3 1.K.3f(a)}5(e.R Z j){2 f=e.R.1V();3 1.K.3g(f)}2 g=a.I.1f;g=c.G(g);5(p.D(1,e.R,g)){1.K.1K(a);3 7}5(!1.18){1.18=J m(1.K)}2 h=1.18.1a(e.R,g,e);5(1.K.3h(e)){3 h}3 7};i.3i=n}(H);!4(l){2 m=l.1Y.5N;2 n=l.5O;2 o=l.2j;2 p=l.5P;2 q=l.N.3d;2 r=l.N.5Q;2 s=l.N.5R;2 t=l.N.2n;2 u=l.2P;2 v=l.5S;2 w=l.3c;2 x=l.3i;2 y=4(){v.D(1);1.1L={};1.1M=7;1.1i=7};y.T(v,u);y.6.1t=4(a){3 1.1L[a]};y.6.1O=4(a,b){5(b){1.1L[a]=b}F{19 1.1L[a]}};y.6.L=4(){2 a=1.1t("2J");5(!a&&1.3j Z w){a=1.3j}3 a};2 z=4(a){2 b=1.L();2 c=b.23();5(!c||c.W===0){M S("2I 5T 5U 3k 5V E")}F{5(a.1s()){3 c[0]}}5(a.12().1r()){2 d=b.13(a);5(!d||d.W===0){3 7}Q(2 i=0;i<c.W;++i){5(d.1H(c[i].1d)){3 c[i]}}}F{Q(2 j=0;j<c.W;++j){5(a.15(c[j].1d)){3 c[j]}}}3 7};2 A=4(a){2 b=1.L();2 c=a.I.14;c=b.G(c);2 d=z.D(1,c);5(!d){3 7}F{5(c.12().1r()){a=a.5W(d.1d)}}3 a};y.6.1I=4(a){2 b=1.L();2 c=a.I.1f;c=b.G(c);2 d=n.1A(a.O());5(d){5(!b.2V(d,c)){M S("2A 1l 22: "+c+", "+d)}}F{d=b.O(c);5(!d){1.1K(a);3 7}}3 v.6.1I.D(1,a)};y.6.1N=4(a){2 b=v.6.1N.D(1,a);2 c=a.R.1X();5(!c){b.I.5X(c)}b.I.5Y(a.R.1h);3 b};y.6.1J=4(a){a=A.D(1,a);5(!a){3 7}2 b=v.6.1J.D(1,a);5(!b){M S("16 17 26 Y: "+a)}5(b.R Z q){2 c=1.1I(b.R.1V());5(c){2 d=1.1J(c);5(d){3 d}}}3 b};y.6.3l=4(a,b,c){2 d=m.1A(b);5(a Z s){2 e=a.5Z();e=d.60(e);2 f=1.1i.2Q(e,c);5(f){a.61(f);a.3m(7)}}3 v.6.3l.D(1,a,b,c)};y.6.3n=4(a,b,c){2 d=1.L();b=d.G(b);2 e=d.62(b);5(!e){2 f=d.O(b);5(!f){1.1K(c);3 7}}3 v.6.3n.D(1,a,b,c)};y.6.3o=4(a,b,c){2 d=m.1A(b);2 e=v.6.3o.D(1,a,b,c);5(!e){M S("16 17 26 Y R: "+c)}5(e Z s){2 f=p.27(e,c.I);2 g=1.1i.2S(e.63(),f);5(g){e.3m(d.26(g))}F{e.64(d)}}};y.6.25=4(a,b,c,d){2 e=1.L();2 f=e.24();2 g=o.3p(f.1d,b);2 h=p.27(a,g);3 1.3q(h,c,d)};y.6.3q=4(a,b,c){2 d=1.L();2 e=a.I.14;e=d.G(e);2 f=1.1N(a);2 g=1.3r(f);2 h=10;5(c&&e.12().1r()){2 j=7;2 k=d.13(e);5(k&&k.W>0){j=g.65(k)}5(j){Q(2 i=0;i<j.W;++i){5(B.D(1,j[i],b)){h=C}}}F{h=B.D(1,g,b)}}F{h=B.D(1,g,b)}3 h};2 B=4(b,c){2 d={2M:4(){c.1Z(b,7)},2N:4(a){c.1Z(a)}};2 e=1.3s(b);3 1.1i.2T(e,d)};y.6.3g=4(a){2 b=1.L();2 c=b.G(a.I.14);2 d=J q(a);5(1.25(d,c)){3 J t("Y 66")}F{3 J r("16 17 2G 67 Y")}};y.6.3e=4(a){8.9(a!==7,"Y E");3 7};y.6.3f=4(a){8.9(a!==7,"Y E");3 7};y.6.3h=4(a){8.9(a!==7,"Y E");8.9(C,"U V!");3 C};y.6.1K=4(a){8.9(a!==7,"Y E");8.9(C,"U V!");3 C};y.6.2O=4(a){2 b=1.68(a);2 c=1.1a(b);5(!c){3 7}2 d=1.L();2 e=d.G(b.I.1f);2 f=d.G(b.I.14);2 g=z.D(1,f);5(!g){g=d.24();5(!g){M S("69 11 3k 2H!")}}2 h=o.3p(g.1d,e);2 i=p.27(c,h);2 j=1.3r(1.1N(i));3 1.3s(j)};y.6.1a=4(a){5(!1.1M){1.1M=J x(1)}3 1.1M.1a(a)};l.6a=y}(H);',62,383,'|this|var|return|function|if|prototype|null|console|assert|||||||||||||||||||||||||||||false|call|empty|else|getIdentifier|DIMP|envelope|new|messenger|getFacebook|throw|protocol|getMeta|ID|for|content|Error|inherits|implement|me|length|setValue|message|instanceof|true|user|getType|getMembers|receiver|equals|failed|to|cpu|delete|process|getOwner|Polylogue|identifier|getValue|sender|key|type|delegate|group|caches|meta|register|get|RECEIPT|profileMap|privateKeyMap|isGroup|isBroadcast|getContext|TypeError|Group|getFounder|BLOCK|list|MUTE|getInstance|profile|data|ans|contactsMap|membersMap|matches|contains|verifyMessage|decryptMessage|suspendMessage|context|processor|encryptMessage|setContext|typeof|getAdmins|Chatroom|User|Command|sn|getMessage|time|getGroup|crypto|onFinished|ansGet|cacheMeta|error|getLocalUsers|getCurrentUser|sendContent|decrypt|newMessage|contentProcessors|CPU|ContentProcessor|Robot|Station|ServiceProvider|Array|setBlockCList|block|setMuteCList|mute|Envelope|setSerialNumber|setMessage|setEnvelope|ReceiptCommand|all|EVERYONE|everyone|anyone|ANYONE|owner|founder|FOUNDER|KEYWORDS|reserved|isReserved|cache|save|keys|push|private|member|assistant|forward|found|local|facebook|loadKeys|result|onSuccess|onFailed|onReceivePackage|ConnectionDelegate|uploadData|msg|downloadData|sendPackage|verifyMeta|saveMeta|loadMeta|EXPIRES|verifyProfile|verify|loadProfile|verifyPrivateKey|loadPrivateKey|cacheContacts|loadContacts|cacheMembers|loadMembers|createIdentifier|Unsupported|getPrivateKeyForSignature|isFounder|getAssistants|Facebook|ForwardContent|broadcastMessage|deliverMessage|forwardMessage|saveMessage|MessageProcessor|entityDelegate|not|encryptContent|setData|encryptKey|decryptContent|newEnvelope|sendMessage|signMessage|serializeMessage|ContentType|UNKNOWN|Dead|cycle|object|GroupDataSource|ChatroomDataSource|host|port|getStations|getBlockCList|BlockCommand|getMuteCList|MuteCommand|number|string|getEnvelope|getMap|Address|name|getNames|Object|moky|ANYWHERE|dkd|mkm|dimp|dim|dimt|rsa|ecc|aes|des|btc|eth|symmetric|asymmetric|public|secret|password|id|address|entity|contact|admin|administrator|main|polylogue|chatroom|social|organization|company|school|government|department|provider|station|thing|robot|instant|secure|reliable|command|history|signature|serial|text|file|image|audio|video|page|handshake|receipt|suicide|abdicate|invite|expel|join|quit|reset|query|hire|fire|resign|server|client|terminal|remote|barrack|transceiver|store|root|supervisor|AddressNameService|KeyCache|getUser|setUser|flush|updateKeys|saveKeys|map|KeyStore|Callback|CompletionHandler|URL|handler|MessengerDelegate|DecryptKey|NetworkType|Profile|Barrack|expires|3600|continue|cacheProfile|saveProfile|cachePrivateKey|savePrivateKey|saveContacts|contacts|saveMembers|members|createUser|isPerson|isRobot|isStation|createGroup|isProvider|getProfile|Date|getTime|1000|getContacts|getPrivateKeysForDecryption|isinstanceof|isOwner|only|so|far|existsMember|existsAssistant|InviteCommand|QueryCommand|SymmetricKey|Meta|InstantMessage|TextContent|FileContent|Transceiver|users|should|be|trim|setGroup|setType|getData|encrypt|setURL|getPublicKeyForEncryption|getURL|setPassword|split|forwarded|your|deserializeMessage|current|Messenger'.split('|'),0,{}))
