/**
 *  DIM-SDK (v0.1.0)
 *  (DIMP: Decentralized Instant Messaging Protocol)
 *
 * @author    moKy <albert.moky at gmail.com>
 * @date      Feb. 3, 2020
 * @copyright (c) 2020 Albert Moky
 * @license   {@link https://mit-license.org | MIT License}
 */
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('b(1d O!=="1t"){O={}}b(1d t!=="1t"){t={}}!4(10,1O){b(1d t.w!=="1t"){10.w={}}F.1u(1O);F.1u(10);F.1u(10.w);10.o("w")}(t,O);!4(6){7 z=4(){};z.5.1P=4(h,c){9.a(h!==8,"h f");9.a(c!==8,"c f");9.a(l,"p q!")};z.5.1Q=4(h,c){9.a(h!==8,"h f");9.a(c!==8,"c f");9.a(l,"p q!")};z.5.1R=4(h,c){9.a(h!==8,"h f");9.a(c!==8,"c f")};z.5.1S=4(h,c){9.a(h!==8,"h f");9.a(c!==8,"c f")};6.1T=z;6.o("1T")}(O);!4(6){7 11=4(1U){3.1V=1U};11.5.1W=4(c){9.a(c!==8,"c f");9.a(l,"p q!");j l};6.11=11;6.o("11")}(O);!4(6){7 C=4(){3.12=[]};C.5.2t=4(G){b(3.12.1X(G)){13 K("G 1Y: "+G)}3.12.1v(G)};C.5.1w=4(c){7 G;1x(7 i=0;i<3.12.1e;++i){G=3.12[i];b(G.1W(c)){c.1f(G.1V);1Z}}};C.5.20=4(c){9.a(c!==8,"c f");9.a(l,"p q!")};C.5.21=4(c){9.a(c!==8,"c f");9.a(l,"p q!")};C.5.22=4(c){9.a(c!==8,"c f")};C.5.23=4(c){9.a(c!==8,"c f")};6.C=C;6.o("C")}(O);!4(6){7 u=F.24.25({14:0,15:1,1y:2});7 x=4(16){3.16=16?16:"2u";3.y=8;3.1z={};3.e=u.14;3.d=8};x.5.2v=4(h,s){3.1z[s]=h};x.5.1f=4(s){7 h=3.y;b(h){3.d.1Q(h,3);h.21(3)}h=3.1z[s];3.y=h;b(h){3.d.1P(h,3);h.20(3)}};x.5.26=4(){j 3.e.P(u.15)};x.5.1w=4(){b(3.26()){3.y.1w(3)}};x.5.27=4(){b(!3.e.P(u.14)||3.y){13 K("1g 27 A: "+3.e)}3.1f(3.16);3.e=u.15};x.5.28=4(){b(3.e.P(u.14)||!3.y){13 K("1g 28 A: "+3.e)}3.e=u.14;3.1f(8)};x.5.1A=4(){b(!3.e.P(u.15)||!3.y){13 K("1g 1A A: "+3.e)}3.d.1R(3.y,3);3.e=u.1y;3.y.22(3)};x.5.1B=4(){b(!3.e.P(u.1y)||!3.y){13 K("1g 1B A: "+3.e)}3.d.1S(3.y,3);3.e=u.15;3.y.23(3)};6.x=x;6.o("x")}(O);!4(6){7 17=4(){};17.5.29=4(H){9.a(H!==8,"H f");9.a(l,"p q!")};6.17=17;6.o("17")}(t);!4(6){7 Q=4(s,18,19){3.s=s;3.18=18;3.19=19};6.Q=Q;6.o("Q")}(t);!4(6){7 Q=6.Q;7 R=4(){3.T={}};R.5.2w=4(U,s){7 I=3.T[s];b(I){b(I.1X(U)){j}}1h{I=[];3.T[s]=I}I.1v(U)};R.5.2a=4(U,s){b(s){7 I=3.T[s];b(I){I.2b(U)}}1h{7 1C=2x.2y(3.T);1x(7 i=0;i<1C.1e;++i){3.2a(U,1C[i])}}};R.5.2z=4(H,18,19){b(1d H==="2A"){H=1a Q(H,18,19)}7 1i=3.T[H.s];b(!1i){j}1x(7 i=0;i<1i.1e;++i){1i[i].29(H)}};7 1j=8;R.2B=4(){b(!1j){1j=1a R()}j 1j};6.2c=R;6.o("2c")}(t);!4(6){7 1D={1k:"2C.2D",1Y:4(m){j!!3.1l(m)},1l:4(m){j 3.1m.2E(3.1k+"."+m)},2F:4(m){7 V=3.1l(m);b(!V){j 8}j F.1n.2d.2e(V)},2G:4(m){7 W=3.1l(m);b(!W){j 8}j F.1n.2f.2e(W)},2b:4(m){3.1o(8,m);j 1E},1o:4(1F,m){b(1F){3.1m.2H(3.1k+"."+m,1F);j 1E}1h{3.1m.2I(3.1k+"."+m);j l}},2J:4(k,m){7 V=8;b(k){V=F.1n.2d.2g(k)}j 3.1o(V,m)},2K:4(1G,m){7 W=8;b(1G){W=F.1n.2f.2g(1G)}j 3.1o(W,m)}};1D.1m=2L.2M;6.2h=1D;6.o("2h")}(t);!4(6){7 z=4(){};z.5.S=4(1H,v){9.a(1H!==8,"1H f");9.a(v!==8,"v f");9.a(l,"p q!")};z.5.2i=4(e,v){9.a(e!==8,"e f");9.a(v!==8,"v f");9.a(l,"p q!")};z.5.1b=4(1I,A,v){9.a(1I!==8,"1I f");9.a(v!==8,"v f");9.a(l,"p q!")};7 u=F.24.25({K:-1,1p:0,2j:1,1J:2});6.2k=z;6.B=u;6.o("2k");6.o("B")}(t);!4(6){7 r=4(){};r.5.2l=4(){9.a(l,"p q!");j 8};r.5.2m=4(L){9.a(L!==8,"L f");9.a(l,"p q!")};r.5.2n=4(){9.a(l,"p q!")};r.5.1A=4(L){};r.5.1B=4(L){};r.5.X=4(1K,d){9.a(1K!==8,"1K f");9.a(d!==8,"d f");9.a(l,"p q!")};6.r=r;6.o("r")}(t);!4(6){7 r=6.r;7 D=4(k,d){3.k=k;3.d=d;3.v=8};D.5.2N=4(k){3.d.S(k)};D.5.2O=4(){3.d.1b(3.k,8,3.v)};D.5.1L=4(A){3.d.1b(3.k,A,3.v)};6.w.D=D;6.w.o("D")}(t);!4(6){7 D=6.w.D;7 B=6.B;7 r=6.r;7 g=4(d){3.d=d;3.e=B.1p;3.1q=[]};g.2o(r);g.5.S=4(k){3.d.S(k,3)};g.5.2l=4(){j 3.e};g.5.Y=4(e){b(e.P(3.e)){j}3.d.2i(e,3);3.e=e};g.5.2p=4(){b(3.1q.1e===0){j 8}j 3.1q.2P()};g.5.1M=4(M,N){9.a(M!==8,"M f");9.a(N!==8,"N f");9.a(l,"p q!")};g.5.1r=4(){9.a(l,"p q!")};g.5.2q=4(){j 3.e.P(B.1J)};g.5.1s=4(){3.Y(B.1J)};g.5.2r=4(){3.Y(B.1p)};g.5.1L=4(A){3.Y(B.K)};g.5.S=4(k){3.d.S(k,3)};g.5.2m=4(L){3.1r();3.Y(B.2j);7 M=L["M"];7 N=L["N"];3.1M(M,N)};g.5.2n=4(){3.1r();3.Y(B.1p)};g.5.X=4(k,d){7 E=1a D(k,d);E.v=3;3.1q.1v(E)};6.w.g=g;6.w.o("g")}(t);!4(6){7 g=6.w.g;7 J=4(d){g.1N(3,d);3.n=8};J.2o(g);J.5.1M=4(M,N){7 2s="n://"+M+":"+N;7 n=1a 2Q(2s);n.1c=3;n.2R=4(Z){3.1c.1s()};n.2S=4(Z){3.1c.2r()};n.2T=4(Z){7 A=1a K("n A: "+Z);3.1c.1L(A)};n.2U=4(Z){3.1c.S(Z.k)};3.n=n};J.5.1r=4(n){b(!3.n){j}3.n.2V();3.n=8};J.5.1s=4(){g.5.1s.1N(3);7 E;2W(1E){E=3.2p();b(!E){1Z}3.n.X(E.k);b(E.d){E.d.1b(E.k,8,3)}}};J.5.X=4(k,d){b(3.2q()){3.n.X(k);b(d){d.1b(k,8,3)}}1h{g.5.X.1N(3,k,d)}};6.w.J=J;6.w.o("J")}(t);',62,183,'|||this|function|prototype|ns|var|null|console|assert|if|machine|delegate|status|empty|Fence|state||return|data|false|path|ws|register|implement|me|Star|name|StarGate|Status|star|extensions|Machine|currentState|Delegate|error|StarStatus|State|Task|task|DIMP|transition|notification|list|SocketClient|Error|options|host|port|FiniteStateMachine|equals|Notification|Center|onReceived|observerMap|observer|base64|json|send|setStatus|ev|sg|Transition|transitions|throw|Stopped|Running|defaultStateName|Observer|sender|userInfo|new|onSent|client|typeof|length|changeState|FSM|else|observers|s_notification_center|ROOT|loadText|storage|format|saveText|Init|waitingList|disconnect|onConnected|object|namespace|push|tick|for|Paused|stateMap|pause|resume|names|Storage|true|text|container|response|request|Connected|payload|onError|connect|call|fsm|enterState|exitState|pauseState|resumeState|StateDelegate|targetStateName|target|evaluate|contains|exists|break|onEnter|onExit|onPause|onResume|type|Enum|isRunning|start|stop|onReceiveNotification|removeObserver|remove|NotificationCenter|Base64|decode|JSON|encode|LocalStorage|onStatusChanged|Connecting|StarDelegate|getStatus|launch|terminate|inherits|getTask|isConnected|onClosed|url|addTransition|default|addState|addObserver|Object|keys|postNotification|string|getInstance|dim|fs|getItem|loadData|loadJSON|setItem|removeItem|saveData|saveJSON|window|localStorage|onResponse|onSuccess|shift|WebSocket|onopen|onclose|onerror|onmessage|close|while'.split('|'),0,{}))
