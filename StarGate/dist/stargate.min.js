/**
 *  DIM-SDK (v0.1.0)
 *  (DIMP: Decentralized Instant Messaging Protocol)
 *
 * @author    moKy <albert.moky at gmail.com>
 * @date      Feb. 3, 2020
 * @copyright (c) 2020 Albert Moky
 * @license   {@link https://mit-license.org | MIT License}
 */
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('h(1G 1o!=="1U"){1o={}}h(1G E!=="1U"){E={}}!a(1h,2K){h(1G E.U!=="1U"){1h.U={}}h(1G E.V!=="1U"){1h.V={}}v.1V(2K);v.1V(1h);v.1V(1h.U);v.1V(1h.V);1h.A("U");1h.A("V")}(E,1o);!a(g){e O=a(){};v.1W(O);O.c.2L=a(y,s){n.o(y!==l,"y u");n.o(s!==l,"s u");n.o(C,"H I!")};O.c.2M=a(y,s){n.o(y!==l,"y u");n.o(s!==l,"s u");n.o(C,"H I!")};O.c.2N=a(y,s){n.o(y!==l,"y u");n.o(s!==l,"s u")};O.c.2O=a(y,s){n.o(y!==l,"y u");n.o(s!==l,"s u")};g.2P=O;g.A("2P")}(1o);!a(g){e 1u=a(2Q){9.2R=2Q};v.Y(1u);1u.c.2S=a(s){n.o(s!==l,"s u");n.o(C,"H I!");m C};g.1u=1u;g.A("1u")}(1o);!a(g){e Z=a(){9.1H=[]};v.Y(Z);Z.c.3u=a(1a){h(9.1H.1X(1a)>=0){1i 1j("1a 2T: "+1a)}9.1H.2e(1a)};Z.c.2f=a(s){e 1a;11(e i=0;i<9.1H.L;++i){1a=9.1H[i];h(1a.2S(s)){s.1Y(1a.2R);2U}}};Z.c.2V=a(s){n.o(s!==l,"s u");n.o(C,"H I!")};Z.c.2W=a(s){n.o(s!==l,"s u");n.o(C,"H I!")};Z.c.2X=a(s){n.o(s!==l,"s u")};Z.c.2Y=a(s){n.o(s!==l,"s u")};g.Z=Z;g.A("Z")}(1o);!a(g){e P=v.2g.2Z({1I:0,1J:1,2h:2});e Q=a(1K){9.1K=1K?1K:"3v";9.W=l;9.2i={};9.w=P.1I;9.t=l};v.Y(Q);Q.c.3w=a(y,M){9.2i[M]=y};Q.c.1Y=a(M){e y=9.W;h(y){9.t.2M(y,9);y.2W(9)}y=9.2i[M];9.W=y;h(y){9.t.2L(y,9);y.2V(9)}};Q.c.30=a(){m 9.w.1p(P.1J)};Q.c.2f=a(){h(9.30()){9.W.2f(9)}};Q.c.31=a(){h(!9.w.1p(P.1I)||9.W){1i 1j("1Z 31 X: "+9.w)}9.1Y(9.1K);9.w=P.1J};Q.c.32=a(){h(9.w.1p(P.1I)||!9.W){1i 1j("1Z 32 X: "+9.w)}9.w=P.1I;9.1Y(l)};Q.c.2j=a(){h(!9.w.1p(P.1J)||!9.W){1i 1j("1Z 2j X: "+9.w)}9.t.2N(9.W,9);9.w=P.2h;9.W.2X(9)};Q.c.2k=a(){h(!9.w.1p(P.2h)||!9.W){1i 1j("1Z 2k X: "+9.w)}9.t.2O(9.W,9);9.w=P.1J;9.W.2Y(9)};g.Q=Q;g.A("Q")}(1o);!a(g){e 1v=a(){};v.1W(1v);1v.c.33=a(1b){n.o(1b!==l,"1b u");n.o(C,"H I!")};g.1v=1v;g.A("1v")}(E);!a(g){e 1k=a(M,1L,1M){9.M=M;9.1L=1L;9.1M=1M};v.Y(1k);g.1k=1k;g.A("1k")}(E);!a(g){e 1k=g.1k;e 1l=a(){9.1w={}};v.Y(1l);1l.c.3x=a(1x,M){e 1c=9.1w[M];h(1c){h(1c.1X(1x)>=0){m}}F{1c=[];9.1w[M]=1c}1c.2e(1x)};1l.c.34=a(1x,M){h(M){e 1c=9.1w[M];h(1c){v.2g.3y.35(1c,1x)}}F{e 2l=3z.3A(9.1w);11(e i=0;i<2l.L;++i){9.34(1x,2l[i])}}};1l.c.3B=a(1b,1L,1M){h(1G 1b==="3C"){1b=R 1k(1b,1L,1M)}e 20=9.1w[1b.M];h(!20){m}11(e i=0;i<20.L;++i){20[i].33(1b)}};e 21=l;1l.3D=a(){h(!21){21=R 1l()}m 21};g.36=1l;g.A("36")}(E);!a(g){e D=a(1d,1e){9.1d=1d;h(1e){9.1q=1e}F{9.1q="2m"}};v.Y(D);D.c.22=a(1m){m 9.1d.22(1m)};D.c.2n=a(1m,37){9.1d.2n(1m,37)};D.c.23=a(1m){9.1d.23(1m)};D.c.38=a(){9.1d.38()};D.c.3E=a(){m 9.1d.L};D.c.1m=a(r){m 9.1d.1m(r)};D.c.2T=a(G){m!!9.22(9.1q+"."+G)};D.c.2o=a(G){m 9.22(9.1q+"."+G)};D.c.3F=a(G){e 1y=9.2o(G);h(!1y){m l}m v.1N.39.3a(1y)};D.c.3G=a(G){e 1z=9.2o(G);h(!1z){m l}m v.1N.3b.3a(1z)};D.c.35=a(G){9.23(9.1q+"."+G);m 2p};D.c.2q=a(2r,G){h(2r){9.2n(9.1q+"."+G,2r);m 2p}F{9.23(9.1q+"."+G);m C}};D.c.3H=a(b,G){e 1y=l;h(b){1y=v.1N.39.3c(b)}m 9.2q(1y,G)};D.c.3I=a(2s,G){e 1z=l;h(2s){1z=v.1N.3b.3c(2s)}m 9.2q(1z,G)};g.3d=R D(2t.3J,"2m.3K");g.3e=R D(2t.3L,"2m.3M");g.A("3d");g.A("3e")}(E);!a(g){e O=a(){};v.1W(O);O.c.1r=a(2u,S){n.o(2u!==l,"2u u");n.o(S!==l,"S u");n.o(C,"H I!")};O.c.3f=a(w,S){n.o(w!==l,"w u");n.o(S!==l,"S u");n.o(C,"H I!")};O.c.1O=a(2v,X,S){n.o(2v!==l,"2v u");n.o(S!==l,"S u");n.o(C,"H I!")};e P=v.2g.2Z({1j:-1,24:0,3g:1,2w:2});g.3h=O;g.12=P;g.A("3h");g.A("12")}(E);!a(g){e N=a(){};v.1W(N);N.c.3i=a(){n.o(C,"H I!");m l};N.c.3j=a(1n){n.o(1n!==l,"1n u");n.o(C,"H I!")};N.c.3k=a(){n.o(C,"H I!")};N.c.2j=a(1n){};N.c.2k=a(1n){};N.c.1A=a(2x,t){n.o(2x!==l,"2x u");n.o(t!==l,"t u");n.o(C,"H I!")};g.N=N;g.A("N")}(E);!a(g){e 13=a(b,t){9.b=b;9.t=t;9.S=l};v.Y(13);13.c.3N=a(b){9.t.1r(b)};13.c.3O=a(){9.t.1O(9.b,l,9.S)};13.c.2y=a(X){9.t.1O(9.b,X,9.S)};g.U.13=13;g.U.A("13")}(E);!a(g){e 13=g.U.13;e 12=g.12;e N=g.N;e x=a(t){9.t=t;9.w=12.24;9.25=[]};v.Y(x,l,N);x.c.1r=a(b){9.t.1r(b,9)};x.c.3i=a(){m 9.w};x.c.1B=a(w){h(w.1p(9.w)){m}9.t.3f(w,9);9.w=w};x.c.3l=a(){h(9.25.L===0){m l}m 9.25.3P()};x.c.2z=a(B,q){n.o(B!==l,"B u");n.o(q!==l,"q u");n.o(C,"H I!")};x.c.26=a(){n.o(C,"H I!")};x.c.3m=a(){m 9.w.1p(12.2w)};x.c.27=a(){9.1B(12.2w)};x.c.3n=a(){9.1B(12.24)};x.c.2y=a(X){9.1B(12.1j)};x.c.1r=a(b){9.t.1r(b,9)};x.c.3j=a(1n){9.26();9.1B(12.3g);e B=1n["B"];e q=1n["q"];9.2z(B,q)};x.c.3k=a(){9.26();9.1B(12.24)};x.c.1A=a(b,t){e 15=R 13(b,t);15.S=9;9.25.2e(15)};g.U.x=x;g.U.A("x")}(E);!a(g){e x=g.U.x;e 1f=a(t){x.1P(9,t);9.J=l};v.Y(1f,x);1f.c.2z=a(B,q){e 28="J";h("3Q"===2t.3R.28.1s(":")[0]){28="3S"}e 3o=28+"://"+B+":"+q;e J=R 3T(3o);J.1Q=9;J.3U=a(1C){9.1Q.27()};J.3V=a(1C){9.1Q.3n()};J.3W=a(1C){e X=R 1j("J X: "+1C);9.1Q.2y(X)};J.3X=a(1C){9.1Q.1r(1C.b)};9.J=J};1f.c.26=a(){h(!9.J){m}9.J.3Y();9.J=l};1f.c.27=a(){x.c.27.1P(9);e 15;3Z(2p){15=9.3l();h(!15){2U}9.J.1A(15.b);h(15.t){15.t.1O(15.b,l,9)}}};1f.c.1A=a(b,t){h(9.3m()){9.J.1A(b);h(t){t.1O(b,l,9)}}F{x.c.1A.1P(9,b,t)}};g.U.1f=1f;g.U.A("1f")}(E);!a(g){e K=a(p,q,b){9.p=p;9.q=q;9.b=b};K.c.1R=a(){n.o(C,"H I!");m l};K.c.1D=a(){m 9.1R()};K.c.40=a(){m 9.1R()};K.c.41=a(3p){e b=9.b;e q=9.q;e 1t=b.L;e z,r;h(!q||q===3p){z=R 29(1t);11(r=0;r<1t;++r){z[r]=b[r]}}F{z=R 29(1t+2);11(r=0;r<1t;++r){z[r]=b[r]}z[1t]=q>>8;z[1t+1]=q&2a}m z};g.V.K=K;g.V.A("K")}(E);!a(g){e K=g.V.K;e 1g=a(p,q,b){h(b){h(!p){p=b[0]+"."+b[1]+"."+b[2]+"."+b[3];h(b.L===6){q=(b[4]<<8)|b[5]}}}F{h(p){b=R 29(4);e z=p.1s(".");11(e r=0;r<4;++r){b[r]=1E(z[r],10)}}F{1i 2A("3q b u: "+b+", "+p+", "+q)}}K.1P(9,p,q,b)};v.Y(1g,K);1g.c.1R=a(){h(9.q===0){m 9.p}F{m 9.p+":"+9.q}};1g.2b=/^(\\d{1,3}\\.){3}\\d{1,3}(:\\d{1,5})?$/;1g.3r=a(B){h(!9.2b.2B(B)){m l}e 2c=B.1s(":");e p=2c[0],q=0;h(2c.L===2){q=1E(2c[1])}m R 1g(p,q)};g.V.1g=1g;g.V.A("1g")}(E);!a(g){e K=g.V.K;e 3s=a(b,z){e T,r=b.42;11(e i=z.L-1;i>=0;--i){T=z[i];b[--r]=T}m b};e 2C=a(b,p,2D){e z,T,r;e 19=p.1X("::");h(19<0){z=p.1s(":");r=-1;11(e i=0;i<2D;++i){T=1E(z[i],16);b[++r]=T>>8;b[++r]=T&2a}}F{e 2E=p.1F(0,19).1s(":");r=-1;11(e j=0;j<2E.L;++j){T=1E(2E[j],16);b[++r]=T>>8;b[++r]=T&2a}e 2F=p.1F(19+2).1s(":");r=2D*2;11(e k=2F.L-1;k>=0;--k){T=1E(2F[k],16);b[--r]=T&2a;b[--r]=T>>8}}m b};e 2G=a(2d,1S){h(2d>0){h(1S>=16){m 1T(2d).1D(16)+1T(1S).1D(16)}m 1T(2d).1D(16)+"0"+1T(1S).1D(16)}F{m 1T(1S).1D(16)}};e 14=a(p,q,b){h(b){h(!p){p=2G(b[0],b[1]);11(e r=2;r<16;r+=2){p+=":"+2G(b[r],b[r+1])}p=p.2H(/:(0:){2,}/,"::");p=p.2H(/^(0::)/,"::");p=p.2H(/(::0)$/,"::");h(b.L===18){q=(b[16]<<8)|b[17]}}}F{h(p){b=R 29(16);e z=p.1s(".");h(z.L===1){b=2C(b,p,8)}F{h(z.L===4){e 1e=z[0];e 19=1e.43(":");z[0]=1e.1F(19+1);1e=1e.1F(0,19);b=2C(b,1e,6);b=3s(b,z)}F{1i 2A("14 1N X: "+p)}}}F{1i 2A("3q b u: "+b+", "+p+", "+q)}}K.1P(9,p,q,b)};v.Y(14,K);14.c.1R=a(){h(9.q===0){m 9.p}F{m"["+9.p+"]:"+9.q}};14.2b=/^\\[?([0-2I-2J-f]{0,4}:){2,7}[0-2I-2J-f]{0,4}(]:\\d{1,5})?$/;14.3t=/^\\[?([0-2I-2J-f]{0,4}:){2,6}(\\d{1,3}.){3}\\d{1,3}(]:\\d{1,5})?$/;14.3r=a(B){h(!9.2b.2B(B)&&!9.3t.2B(B)){m l}e p,q;h(B.44(0)==="["){e 19=B.1X("]");p=B.1F(1,19);q=1E(B.1F(19+2))}F{p=B;q=0}m R 14(p,q)};g.V.14=14;g.V.A("14")}(E);',62,253,'|||||||||this|function|data|prototype||var||ns|if||||null|return|console|assert|ip|port|index|machine|delegate|empty|DIMP|status|Fence|state|array|register|host|false|Storage|StarGate|else|path|implement|me|ws|Host|length|name|Star|Delegate|Status|Machine|new|star|item|extensions|network|currentState|error|Class|State||for|StarStatus|Task|IPv6|task||||pos|transition|notification|list|storage|prefix|SocketClient|IPv4|sg|throw|Error|Notification|Center|key|options|FiniteStateMachine|equals|ROOT|onReceived|split|len|Transition|Observer|observerMap|observer|base64|json|send|setStatus|ev|toString|parseInt|substring|typeof|transitions|Stopped|Running|defaultStateName|sender|userInfo|format|onSent|call|client|valueOf|lo|Number|object|Namespace|Interface|indexOf|changeState|FSM|observers|s_notification_center|getItem|removeItem|Init|waitingList|disconnect|onConnected|protocol|Uint8Array|255|patten|pair|hi|push|tick|type|Paused|stateMap|pause|resume|names|dim|setItem|loadText|true|saveText|text|container|window|response|request|Connected|payload|onError|connect|URIError|test|parse_v6|count|left|right|hex_encode|replace|9A|Fa|fsm|enterState|exitState|pauseState|resumeState|StateDelegate|targetStateName|target|evaluate|exists|break|onEnter|onExit|onPause|onResume|Enum|isRunning|start|stop|onReceiveNotification|removeObserver|remove|NotificationCenter|value|clear|Base64|decode|JSON|encode|LocalStorage|SessionStorage|onStatusChanged|Connecting|StarDelegate|getStatus|launch|terminate|getTask|isConnected|onClosed|url|default_port|IP|parse|parse_v4|patten_compat|addTransition|default|addState|addObserver|Arrays|Object|keys|postNotification|string|getInstance|getLength|loadData|loadJSON|saveData|saveJSON|localStorage|fs|sessionStorage|mem|onResponse|onSuccess|shift|https|location|wss|WebSocket|onopen|onclose|onerror|onmessage|close|while|toLocaleString|toArray|byteLength|lastIndexOf|charAt'.split('|'),0,{}))
